<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Double Pendulum ‚Äî Advanced Chaos Lab</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style id="pre">:root{--bg:#0d1021;--fg:#e9ecff}</style>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="top">
    <div class="brand">Double Pendulum ‚Äî Advanced Chaos Lab</div>
    <div class="tags">Lagrangian ‚Ä¢ Cartesian Constraints ‚Ä¢ Springs ‚Ä¢ RK/Implicit ‚Ä¢ Lyapunov ‚Ä¢ Poincar√© ‚Ä¢ Collisions</div>
  </header>

  <main class="layout">
    <section class="left">
      <canvas id="view" width="1280" height="760"></canvas>
      <div class="overlay">
        <div class="hud">
          <span>t <b id="t">0.000</b></span>
          <span>Œ∏‚ÇÅ <b id="th1">0.000</b></span>
          <span>Œ∏‚ÇÇ <b id="th2">0.000</b></span>
          <span>œâ‚ÇÅ <b id="w1">0.000</b></span>
          <span>œâ‚ÇÇ <b id="w2">0.000</b></span>
          <span>T <b id="Te">0.000</b></span>
          <span>V <b id="Ve">0.000</b></span>
          <span>E <b id="Ee">0.000</b></span>
          <span>dE <b id="dE">0.000</b></span>
          <span>FPS <b id="fps">0</b></span>
          <span>Œª <b id="lyap">‚Äî</b></span>
        </div>
        <div class="legend">
          <div><i class="dot a"></i> base</div>
          <div><i class="dot b"></i> twin</div>
          <div><i class="dot c"></i> magnet (right‚Äëclick)</div>
          <div><i class="dot d"></i> ensemble</div>
          <div><i class="dot e"></i> collisions</div>
        </div>
      </div>
    </section>

    <section class="right">
      <div class="card">
        <div class="row">
          <button id="play">‚ñ∂</button>
          <button id="pause">‚è∏</button>
          <button id="step">‚è≠</button>
          <button id="reset">‚ü≤</button>
          <button id="random">üé≤</button>
          <button id="shot">üì∑ PNG</button>
          <button id="theme">üåì Theme</button>
        </div>
        <div class="row">
          <label>Model
            <select id="model">
              <option value="rigid">Rigid (Lagrangian, angles)</option>
              <option value="string">Strings (Cartesian + constraints)</option>
              <option value="spring">Springs (Hooke + damping)</option>
            </select>
          </label>
          <label>Integrator
            <select id="integrator">
              <option value="rk4">RK4</option>
              <option value="rk2">RK2</option>
              <option value="verlet">Verlet</option>
              <option value="semi">Semi-implicit</option>
              <option value="euler">Euler</option>
              <option value="impl_mid">Implicit Midpoint</option>
            </select>
          </label>
          <label>dt
            <input id="dt" type="number" step="0.001" value="0.004" />
          </label>
          <label>Slow
            <input id="slow" type="checkbox" />
          </label>
          <label>Adaptive
            <input id="adaptive" type="checkbox" />
          </label>
        </div>
      </div>

      <div class="card">
        <div class="grid2">
          <label>g <input id="g" type="range" min="0.1" max="25" step="0.01" value="9.81" /><span id="g_v">9.81</span></label>
          <label>m1 <input id="m1" type="range" min="0.05" max="6" step="0.01" value="1" /><span id="m1_v">1.00</span></label>
          <label>m2 <input id="m2" type="range" min="0.05" max="6" step="0.01" value="1" /><span id="m2_v">1.00</span></label>
          <label>l1 <input id="l1" type="range" min="0.2" max="3" step="0.01" value="1" /><span id="l1_v">1.00</span></label>
          <label>l2 <input id="l2" type="range" min="0.2" max="3" step="0.01" value="1" /><span id="l2_v">1.00</span></label>
          <label>rod m‚ÇÅ <input id="rm1" type="range" min="0" max="3" step="0.01" value="0" /><span id="rm1_v">0.00</span></label>
          <label>rod m‚ÇÇ <input id="rm2" type="range" min="0" max="3" step="0.01" value="0" /><span id="rm2_v">0.00</span></label>
          <label>b‚ÇÅ <input id="b1" type="range" min="0" max="0.5" step="0.001" value="0.01" /><span id="b1_v">0.010</span></label>
          <label>b‚ÇÇ <input id="b2" type="range" min="0" max="0.5" step="0.001" value="0.01" /><span id="b2_v">0.010</span></label>
          <label>quad drag <input id="qd" type="range" min="0" max="0.8" step="0.001" value="0" /><span id="qd_v">0.000</span></label>
          <label>wind (x) <input id="windx" type="range" min="-3" max="3" step="0.01" value="0.00" /><span id="windx_v">0.00</span></label>
          <label>px/m <input id="scale" type="range" min="80" max="380" step="1" value="170" /><span id="scale_v">170</span></label>
          <label>trail <input id="trail" type="range" min="50" max="5000" step="10" value="2000" /><span id="trail_v">2000</span></label>
        </div>
      </div>

      <div class="card">
        <div class="grid2">
          <label>Œ∏‚ÇÅ <input id="ic_th1" type="number" step="0.001" value="1.5708" /></label>
          <label>Œ∏‚ÇÇ <input id="ic_th2" type="number" step="0.001" value="1.5708" /></label>
          <label>œâ‚ÇÅ <input id="ic_w1" type="number" step="0.001" value="0" /></label>
          <label>œâ‚ÇÇ <input id="ic_w2" type="number" step="0.001" value="0" /></label>
        </div>
        <div class="row">
          <button id="applyIC">Apply</button>
          <label><input id="dragSet" type="checkbox" /> Drag‚Äëset</label>
          <label><input id="grab2" type="checkbox" checked /> Grab Bob 2</label>
        </div>
      </div>

      <div class="card">
        <div class="row">
          <label><input id="twin" type="checkbox" /> Twin</label>
          <label>Œî¬∞ <input id="twinDelta" type="number" step="0.0001" value="0.001" /></label>
          <label><input id="ensemble" type="checkbox" /> Ensemble (6)</label>
          <label><input id="showPhase" type="checkbox" checked /> Phase</label>
          <label><input id="showEnergy" type="checkbox" checked /> Energy</label>
          <label><input id="showStrobe" type="checkbox" /> Strobe</label>
        </div>
        <div class="row">
          <label><input id="mag" type="checkbox" /> Magnet</label>
          <label>k <input id="magK" type="range" min="-2000" max="2000" step="10" value="600" /> <span id="magK_v">600</span></label>
          <label>spring k <input id="sk" type="range" min="0" max="1200" step="1" value="300" /> <span id="sk_v">300</span></label>
          <label>spring c <input id="sc" type="range" min="0" max="16" step="0.05" value="1" /> <span id="sc_v">1.00</span></label>
        </div>
        <canvas id="phase" width="560" height="170"></canvas>
        <canvas id="energy" width="560" height="130"></canvas>
        <canvas id="strobe" width="560" height="170"></canvas>
      </div>

      <div class="card">
        <div class="row">
          <label><input id="collide" type="checkbox" /> Collisions</label>
          <label>Restitution <input id="rest" type="number" step="0.05" value="0.8" /></label>
          <label>Friction <input id="mu" type="number" step="0.05" value="0.25" /></label>
          <label>Obstacle r <input id="ob_r" type="number" step="0.01" value="0.16" /></label>
          <label>Obstacle x <input id="ob_x" type="number" step="0.01" value="0.15" /></label>
          <label>Obstacle y <input id="ob_y" type="number" step="0.01" value="1.25" /></label>
        </div>
      </div>

      <div class="card">
        <div class="row">
          <label><input id="baumgarte" type="checkbox" /> Baumgarte</label>
          <label>Œ≤ <input id="beta" type="number" step="0.01" value="0.2" /></label>
          <label>Œ∂ <input id="zeta" type="number" step="0.01" value="0.7" /></label>
          <label>SHAKE iters <input id="shakeN" type="number" step="1" value="3" /></label>
        </div>
        <div class="row">
          <button id="presetClassic">Preset: Classic</button>
          <button id="presetWild">Preset: Wild</button>
          <button id="presetDamped">Preset: Damped</button>
          <button id="presetRope">Preset: Rope</button>
          <button id="presetSpring">Preset: Spring</button>
        </div>
        <div class="row small">Shortcuts: <code>space</code> play/pause ‚Ä¢ <code>S</code> step ‚Ä¢ <code>R</code> reset ‚Ä¢ <code>G</code> random ‚Ä¢ <code>[</code>/<code>]</code> dt ‚Ä¢ <code>P</code> PNG</div>
      </div>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
